<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Get Observations Within Wind Sector (Wind Filter) — windfilter_get_indizes • foehnix</title>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Get Observations Within Wind Sector (Wind Filter) — windfilter_get_indizes" />

<meta property="og:description" content="foehnix models allow to specify an optional
    windfilter. This filter is not restricted to wind
    direction, but typically a wind direction filter is used
    to restrict foehn classification to a specific wind sector
    from which foehn is expected.
Multiple filter rules can be used, e.g., a wind sector
    for the target location and an additional wind sector filter
    for an upstream station. More details can be found in the
    'Details' section and the 'Examples' of this manual page." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">foehnix</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../articles/foehnix.html">Getting started</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/foehnix.html">Foehnix Demo</a>
    </li>
    <li>
      <a href="../articles/simulation.html">Simulation Examples</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Advanced
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/advanced_simulation.html">Censoring and Truncation</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/retostauffer/Rfoehnix">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Get Observations Within Wind Sector (Wind Filter)</h1>
    
    <div class="hidden name"><code>windfilter_get_indizes.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p><code><a href='foehnix.html'>foehnix</a></code> models allow to specify an optional
    <code>windfilter</code>. This filter is not restricted to wind
    direction, but typically a wind direction filter is used
    to restrict foehn classification to a specific wind sector
    from which foehn is expected.</p>
<p>Multiple filter rules can be used, e.g., a wind sector
    for the target location and an additional wind sector filter
    for an upstream station. More details can be found in the
    'Details' section and the 'Examples' of this manual page.</p>
    
    </div>

    <pre class="usage"><span class='fu'>windfilter_get_indizes</span>(<span class='no'>x</span>, <span class='no'>windfilter</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>object of class <code>zoo</code> or <code>data.frame</code> containing
        the observations.</p></td>
    </tr>
    <tr>
      <th>windfilter</th>
      <td><p>a list of filter rules (or <code>NULL</code>), see 'Details'.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Foehn winds often (not always) show a very specific wind direction
    due to the canalization of the air flow trough the local
    topography. The <code>windfilter</code> option allows to subset the
    data according to a user defined wind sector using the observed
    wind direction to filter the observations.</p>
<p>The <code>windfilter</code> object can be <code>NULL</code> (for convenience, no
    filtering), in this case the function simply returns <code>NULL</code>.
    Else <code>windfilter</code> has to be a named <code>list</code> where each
    list element contains a numeric vector with two numeric values.
    As an example: if we know that foehn wind for a specific location
    has to have a wind direction between 100 and 260 degrees and the
    observed wind direction in <code>x</code> is <code>dd</code> we can specify
    a wind filter as follows:</p>
<p></p><ul>
<li><p><code>windfilter = list(dd = c(100, 260))</code></p></li>
</ul>
    <p>The following rules are applied (example for column <code>dd</code>:</p><ul>
<li><p>If the first element is smaller than the second element:
            only rows of <code>x</code> where <code>x[,"dd"]</code> is within the
            defined sector will be used for classification.</p></li>
<li><p>If the first element is larger than the second element:
            only rows of <code>x</code> where <code>x[,"dd"]</code> is outside the
            defined sector will be used for classification (allows to
            specify north wind sectors going trough 0 degrees).</p></li>
</ul>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>    <span class='co'># Loading example data set and conver to zoo time series</span>
    <span class='co'># time series object.</span>
    <span class='fu'><a href='https://www.rdocumentation.org/packages/utils/topics/data'>data</a></span>(<span class='st'>"ellboegen"</span>, <span class='kw'>package</span> <span class='kw'>=</span> <span class='st'>"foehnix"</span>)
    <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/library'>library</a></span>(<span class='st'>"zoo"</span>)
    <span class='no'>ellboegen</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/zoo/topics/zoo'>zoo</a></span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/subset'>subset</a></span>(<span class='no'>ellboegen</span>, <span class='kw'>select</span> <span class='kw'>=</span> -<span class='no'>timestamp</span>),
                     <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/as.POSIXlt'>as.POSIXct</a></span>(<span class='no'>ellboegen</span>$<span class='no'>timestamp</span>, <span class='kw'>origin</span> <span class='kw'>=</span> <span class='st'>"1970-01-01"</span>, <span class='kw'>tz</span> <span class='kw'>=</span> <span class='st'>"UTC"</span>))

    <span class='co'># Case 1:</span>
    <span class='co'># -----------------</span>
    <span class='co'># Filter for observations where the wind direction is</span>
    <span class='co'># within 100 - 260 (southerly flow):</span>
    <span class='no'>idx_south</span> <span class='kw'>&lt;-</span> <span class='fu'>windfilter_get_indizes</span>(<span class='no'>ellboegen</span>, <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/list'>list</a></span>(<span class='kw'>dd</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='fl'>100</span>, <span class='fl'>260</span>)))

    <span class='co'># Same filter but for northerly flows, taking rows with</span>
    <span class='co'># wind direction observations (dd) smaller than 45 or</span>
    <span class='co'># larger than 315 degrees:</span>
    <span class='no'>idx_north</span> <span class='kw'>&lt;-</span> <span class='fu'>windfilter_get_indizes</span>(<span class='no'>ellboegen</span>, <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/list'>list</a></span>(<span class='kw'>dd</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='fl'>315</span>, <span class='fl'>45</span>)))

    <span class='fu'><a href='https://www.rdocumentation.org/packages/graphics/topics/par'>par</a></span>(<span class='kw'>mfrow</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='fl'>1</span>,<span class='fl'>3</span>))
    <span class='fu'><a href='https://www.rdocumentation.org/packages/graphics/topics/hist'>hist</a></span>(<span class='no'>ellboegen</span>$<span class='no'>dd</span>,            <span class='kw'>xlab</span> <span class='kw'>=</span> <span class='st'>"dd"</span>, <span class='kw'>main</span> <span class='kw'>=</span> <span class='st'>"all observations"</span>)
    <span class='fu'><a href='https://www.rdocumentation.org/packages/graphics/topics/hist'>hist</a></span>(<span class='no'>ellboegen</span>$<span class='no'>dd</span>[<span class='no'>idx_south</span>], <span class='kw'>xlab</span> <span class='kw'>=</span> <span class='st'>"dd"</span>, <span class='kw'>main</span> <span class='kw'>=</span> <span class='st'>"southerly winds"</span>)
    <span class='fu'><a href='https://www.rdocumentation.org/packages/graphics/topics/hist'>hist</a></span>(<span class='no'>ellboegen</span>$<span class='no'>dd</span>[<span class='no'>idx_north</span>], <span class='kw'>xlab</span> <span class='kw'>=</span> <span class='st'>"dd"</span>, <span class='kw'>main</span> <span class='kw'>=</span> <span class='st'>"northerly winds"</span>)</div><div class='img'><img src='windfilter_get_indizes-1.png' alt='' width='700' height='433' /></div><div class='input'>
    <span class='co'># Case 2:</span>
    <span class='co'># -----------------</span>
    <span class='co'># A second useful option is to add two filters:</span>
    <span class='co'># the wind direction at the target station (here Ellboegen)</span>
    <span class='co'># has to be within c(43, 223), the wind direction at the</span>
    <span class='co'># corresponding crest station (upstream, crest of the European Alps)</span>
    <span class='co'># has to show southerly flows with a wind direction from</span>
    <span class='co'># 90 degrees (East) to 270 degrees (West).</span>

    <span class='co'># Loading Sattelberg station data and convert to zoo</span>
    <span class='co'># time series object.</span>
    <span class='fu'><a href='https://www.rdocumentation.org/packages/utils/topics/data'>data</a></span>(<span class='st'>"sattelberg"</span>, <span class='kw'>package</span> <span class='kw'>=</span> <span class='st'>"foehnix"</span>)
    <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/library'>require</a></span>(<span class='st'>"zoo"</span>)
    <span class='no'>sattelberg</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/zoo/topics/zoo'>zoo</a></span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/subset'>subset</a></span>(<span class='no'>sattelberg</span>, <span class='kw'>select</span> <span class='kw'>=</span> -<span class='no'>timestamp</span>),
                     <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/as.POSIXlt'>as.POSIXct</a></span>(<span class='no'>sattelberg</span>$<span class='no'>timestamp</span>, <span class='kw'>origin</span> <span class='kw'>=</span> <span class='st'>"1970-01-01"</span>, <span class='kw'>tz</span> <span class='kw'>=</span> <span class='st'>"UTC"</span>))
    <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/names'>names</a></span>(<span class='no'>sattelberg</span>) <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/sprintf'>sprintf</a></span>(<span class='st'>"sat_%s"</span>, <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/names'>names</a></span>(<span class='no'>sattelberg</span>)) <span class='co'># Renaming variables</span>

    <span class='co'># Combine Ellboegen observations with Sattelberg observations</span>
    <span class='no'>data</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/merge'>merge</a></span>(<span class='no'>ellboegen</span>, <span class='no'>sattelberg</span>)
    <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/print'>print</a></span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/utils/topics/head'>head</a></span>(<span class='no'>data</span>))</div><div class='output co'>#&gt;                      dd  ff     p rh    t sat_dd sat_ff sat_p sat_rh sat_t
#&gt; 2010-01-18 09:00:00 338 1.2 899.8 75 -0.9      3    5.6 787.7     93  -8.7
#&gt; 2010-01-18 10:00:00  18 0.1 899.9 66  0.2    344    5.3 787.9     90  -8.0
#&gt; 2010-01-18 11:00:00 344 0.8 899.1 63  0.7    360    6.0 787.3     80  -7.7
#&gt; 2010-01-18 12:00:00 303 2.4 898.8 60  0.7    357    6.5 786.8     77  -7.3
#&gt; 2010-01-18 13:00:00 292 2.8 898.5 57  1.9    358    8.7 786.6     78  -7.2
#&gt; 2010-01-18 14:00:00 316 1.6 898.6 70  0.3    352    7.6 786.8     80  -7.2</div><div class='input'>
    <span class='co'># Now apply a wind filter</span>
    <span class='no'>windfilter</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/list'>list</a></span>(<span class='kw'>dd</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='fl'>43</span>, <span class='fl'>223</span>), <span class='kw'>sat_dd</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='fl'>90</span>, <span class='fl'>270</span>))
    <span class='no'>idx</span> <span class='kw'>&lt;-</span> <span class='fu'>windfilter_get_indizes</span>(<span class='no'>data</span>, <span class='no'>windfilter</span>)
    <span class='no'>data</span> <span class='kw'>&lt;-</span> <span class='no'>data</span>[<span class='no'>idx</span>,]

    <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/summary'>summary</a></span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/subset'>subset</a></span>(<span class='no'>data</span>, <span class='kw'>select</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='no'>dd</span>, <span class='no'>sat_dd</span>)))</div><div class='output co'>#&gt;      Index                           dd            sat_dd     
#&gt;  Min.   :2010-01-19 22:00:00   Min.   : 43.0   Min.   : 90.0  
#&gt;  1st Qu.:2011-11-02 04:00:00   1st Qu.:122.0   1st Qu.:164.0  
#&gt;  Median :2013-12-13 20:00:00   Median :132.0   Median :177.0  
#&gt;  Mean   :2013-12-05 08:45:06   Mean   :130.1   Mean   :179.7  
#&gt;  3rd Qu.:2015-12-17 01:00:00   3rd Qu.:139.0   3rd Qu.:190.0  
#&gt;  Max.   :2018-03-10 12:00:00   Max.   :223.0   Max.   :270.0  </div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#details">Details</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Reto Stauffer.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.9000.</p>
</div>
      </footer>
   </div>

  

  </body>
</html>

